(()=>{window.onload=()=>{console.log("page is fully loaded"),v(h)};const e=document.getElementById("cardCollection"),t=document.getElementById("allSpeciesFish"),a=document.getElementById("africanCichlids"),n=document.getElementById("americanCichlids"),i=document.getElementById("livebearer"),o=document.getElementById("tetras"),c=document.querySelectorAll(".tag"),s=document.getElementById("searchTerm");let d=document.querySelectorAll("#addMyStock"),l=document.querySelectorAll("[data-modal-target]"),r=document.querySelectorAll("[data-close-button]"),m=document.getElementById("overlay");catalogMessage=document.getElementById("catalogMessage"),e.style.display="none",s.style.display="none",document.getElementById("tags").style.display="none";let u=[];const h="https://private-c681a-aquariumfish.apiary-mock.com/species";async function v(e){try{u=await async function(e){const t=await fetch(e);if(t.ok)return await t.json();throw new Error("Bad response")}(e),g(u)}catch(e){console.log(e)}}async function g(t){const a=t.map((e=>`\n        <div class="fish-box" id="${e.id}">\n        <div class="img-container">\n              <img src="${e.image_link}">\n        </div>\n        <div class="info-container">\n         <h4>${e.species_group}</h4>\n         <h2>${e.common_name}</h2>\n         <h3>${e.scientific_name}</h3>\n         <div class="addButton">\n            <button class="addMyStock" id="addMyStock" name="${e.id}" type="submit">Add to MyStock</button>\n         </div>\n      </div>\n      <button data-modal-target="#modal${e.id}" class="infoButton" id="infoButton">Information</button>\n      <div class="modal" id="modal${e.id}">\n    <div class="modal-header">\n      <div class="title"></div>\n      <button data-close-button class="close-button">&times;</button>\n    </div>\n    <div class="modal-body">\n    <div class="modal-img-container">\n              <img src="${e.image_link}">\n        </div>\n        <h4>${e.species_group}</h4>\n        <h2>${e.common_name}</h2>\n        <h3>${e.scientific_name}</h3>\n        <div class="modal-fishInfo">\n        <p>${e.common_name} fish live for up to ${e.lifespan} and are ${e.care_level} to care for. Their length is approximately ${e.average_adult_size} at maturity and ${e.maximum_adult_size} at maximum. Their desired aquarium size should be at least ${e.minimum_tank_size}. The pH of the water should be between ${e.ph} and the water temperature should be between ${e.temperature} degrees.</p>\n        </div>\n        </div>\n  </div>\n    </div>\n        `)).join("");e.innerHTML=a,d=document.querySelectorAll("#addMyStock"),infoButton=document.querySelectorAll("#infoButton"),l=document.querySelectorAll("[data-modal-target]"),r=document.querySelectorAll("[data-close-button]"),m=document.getElementById("overlay"),function(){function e(e){null!=e&&(e.classList.remove("active"),m.classList.remove("active"))}l.forEach((e=>{e.addEventListener("click",(()=>{var t;null!=(t=document.querySelector(e.dataset.modalTarget))&&(t.classList.add("active"),m.classList.add("active"))}))})),m.addEventListener("click",(()=>{document.querySelectorAll(".modal.active").forEach((t=>{e(t)}))})),r.forEach((t=>{t.addEventListener("click",(()=>{e(t.closest(".modal"))}))}))}(),function(e){let t=JSON.parse(sessionStorage.getItem("user"));d.forEach(((a,n)=>{a.addEventListener("click",(()=>{let a={fish_id:e[n].id,common_name:e[n].common_name,scientific_name:e[n].scientific_name,species_group:e[n].species_group,image_link:e[n].image_link},i={client_id:t.client_id,fish_id:e[n].id,quantity:"0"};f("https://web-2-backend-22-23-batuhanayazz.onrender.com/fish","POST",a).then((e=>{})),f("https://web-2-backend-22-23-batuhanayazz.onrender.com/clients/stocks","POST",i).then((e=>{"Bad Request"==e.status?(catalogMessage.innerHTML=`<p style="background-color: red">${e.message}</p>`,y()):(catalogMessage.innerHTML=`<p style="background-color: #007a4d">${e.message}</p>`,y())}))}))}))}(t)}function y(){catalogMessage.classList.add("fade-in"),setTimeout((()=>{catalogMessage.classList.remove("fade-in"),catalogMessage.classList.add("fade-out")}),1500,catalogMessage.classList.remove("fade-out"))}async function f(e,t,a){const n=await fetch(e,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});return await n.json()}s.addEventListener("keyup",(e=>{const t=e.target.value.toLowerCase();g(u.filter((e=>e.common_name.toLowerCase().includes(t)||e.scientific_name.toLowerCase().includes(t))))})),t.addEventListener("click",(()=>{v(h),s.value=""})),a.addEventListener("click",(()=>{v("https://private-c681a-aquariumfish.apiary-mock.com/africancichlids"),s.value=""})),n.addEventListener("click",(()=>{v("https://private-c681a-aquariumfish.apiary-mock.com/americancichlids"),s.value=""})),i.addEventListener("click",(()=>{v("https://private-c681a-aquariumfish.apiary-mock.com/livebearer"),s.value=""})),o.addEventListener("click",(()=>{v("https://private-c681a-aquariumfish.apiary-mock.com/tetras"),s.value=""})),c.forEach((e=>{e.addEventListener("click",(()=>{c.forEach((e=>e.classList.remove("active"))),e.classList.add("active")}))}))})();