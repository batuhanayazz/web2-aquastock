(()=>{window.onload=()=>{console.log("page is fully loaded"),y(h)};const e=document.getElementById("cardCollection"),t=document.getElementById("allSpeciesFish"),n=document.getElementById("africanCichlids"),a=document.getElementById("americanCichlids"),i=document.getElementById("livebearer"),c=document.getElementById("tetras"),o=document.querySelectorAll(".tag"),d=document.getElementById("searchTerm");let s=document.querySelectorAll("#addMyStock"),l=document.querySelectorAll("[data-modal-target]"),r=document.querySelectorAll("[data-close-button]"),m=document.getElementById("overlay");document.getElementById("accountContainer"),document.getElementById("signUp"),document.getElementById("signUpEmail"),document.getElementById("signUpPassword"),e.style.display="none",d.style.display="none",document.getElementById("tags").style.display="none";let u=[];const h="https://private-c681a-aquariumfish.apiary-mock.com/species";async function y(e){try{u=await async function(e){const t=await fetch(e);if(t.ok)return await t.json();throw new Error("Bad response")}(e),v(u)}catch(e){console.log(e)}}async function v(t){const n=t.map((e=>`\n        <div class="fish-box" id="${e.id}">\n        <div class="img-container">\n              <img src="${e.image_link}">\n        </div>\n        <div class="info-container">\n         <h4>${e.species_group}</h4>\n         <h2>${e.common_name}</h2>\n         <h3>${e.scientific_name}</h3>\n         <div class="addButton">\n            <button class="addMyStock" id="addMyStock" name="${e.id}" type="submit">Add to MyStock</button>\n         </div>\n      </div>\n      <button data-modal-target="#modal${e.id}" class="infoButton" id="infoButton">Information</button>\n      <div class="modal" id="modal${e.id}">\n    <div class="modal-header">\n      <div class="title"></div>\n      <button data-close-button class="close-button">&times;</button>\n    </div>\n    <div class="modal-body">\n    <div class="modal-img-container">\n              <img src="${e.image_link}">\n        </div>\n        <h4>${e.species_group}</h4>\n        <h2>${e.common_name}</h2>\n        <h3>${e.scientific_name}</h3>\n        <div class="modal-fishInfo">\n        <p>${e.common_name} fish live for up to ${e.lifespan} and are ${e.care_level} to care for. Their length is approximately ${e.average_adult_size} at maturity and ${e.maximum_adult_size} at maximum. Their desired aquarium size should be at least ${e.minimum_tank_size}. The pH of the water should be between ${e.ph} and the water temperature should be between ${e.temperature} degrees.</p>\n        </div>\n        </div>\n  </div>\n    </div>\n        `)).join("");e.innerHTML=n,s=document.querySelectorAll("#addMyStock"),infoButton=document.querySelectorAll("#infoButton"),l=document.querySelectorAll("[data-modal-target]"),r=document.querySelectorAll("[data-close-button]"),m=document.getElementById("overlay"),function(){function e(e){null!=e&&(e.classList.remove("active"),m.classList.remove("active"))}l.forEach((e=>{e.addEventListener("click",(()=>{var t;null!=(t=document.querySelector(e.dataset.modalTarget))&&(t.classList.add("active"),m.classList.add("active"))}))})),m.addEventListener("click",(()=>{document.querySelectorAll(".modal.active").forEach((t=>{e(t)}))})),r.forEach((t=>{t.addEventListener("click",(()=>{e(t.closest(".modal"))}))}))}(),function(e){let t=JSON.parse(sessionStorage.getItem("user"));s.forEach(((n,a)=>{n.addEventListener("click",(()=>{let n={fish_id:e[a].id,common_name:e[a].common_name,scientific_name:e[a].scientific_name,species_group:e[a].species_group,image_link:e[a].image_link},i={client_id:t.client_id,fish_id:e[a].id,quantity:"0"};p("https://web-2-backend-22-23-batuhanayazz.onrender.com/fish","POST",n).then((e=>{})),p("https://web-2-backend-22-23-batuhanayazz.onrender.com/clients/stocks","POST",i).then((e=>{alert(`${n.common_name}, ${e.message}`)}))}))}))}(t)}async function p(e,t,n){const a=await fetch(e,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});return await a.json()}d.addEventListener("keyup",(e=>{const t=e.target.value.toLowerCase();v(u.filter((e=>e.common_name.toLowerCase().includes(t)||e.scientific_name.toLowerCase().includes(t))))})),t.addEventListener("click",(()=>{y(h)})),n.addEventListener("click",(()=>{y("https://private-c681a-aquariumfish.apiary-mock.com/africancichlids")})),a.addEventListener("click",(()=>{y("https://private-c681a-aquariumfish.apiary-mock.com/americancichlids")})),i.addEventListener("click",(()=>{y("https://private-c681a-aquariumfish.apiary-mock.com/livebearer")})),c.addEventListener("click",(()=>{y("https://private-c681a-aquariumfish.apiary-mock.com/tetras")})),o.forEach((e=>{e.addEventListener("click",(()=>{o.forEach((e=>e.classList.remove("active"))),e.classList.add("active")}))}))})();